(function(t){function e(e){for(var a,i,c=e[0],o=e[1],u=e[2],d=0,f=[];d<c.length;d++)i=c[d],s[i]&&f.push(s[i][0]),s[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(f.length)f.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,c=1;c<r.length;c++){var o=r[c];0!==s[o]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},s={app:0},n=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0997":function(t,e,r){"use strict";var a=r("15a5"),s=r.n(a);s.a},"15a5":function(t,e,r){},3379:function(t,e,r){"use strict";var a=r("af8e"),s=r.n(a);s.a},"564f":function(t,e,r){"use strict";var a=r("68eb"),s=r.n(a);s.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"section",attrs:{id:"app"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-3"},[r("CartList")],1),r("div",{staticClass:"column is-9"},[r("ProductList")],1)])])])},n=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns is-multiline"},[t._m(0),r("div",{staticClass:"column is-full"},t._l(t.cartItems,function(t){return r("CartListItem",{key:t.id,attrs:{cartItem:t}})}),1),r("div",{staticClass:"column is-full"},[r("span",[t._v("总数量："),r("strong",[t._v(t._s(t.cartQuantity))])]),r("span",{staticClass:"is-pulled-right",on:{click:t.removeAllCartItems}},[r("i",{staticClass:"fa fa-trash"}),t._v("清空购物车")])]),r("div",{staticClass:"column is-full"},[r("button",{staticClass:"button is-fullwidth is-primary"},[t._v("￥"+t._s(t.cartTotal))])])])},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"column is-full"},[r("div",{staticClass:"cart-header has-text-centered"},[r("i",{staticClass:"fa fa-user-circle fa-2x"})])])}],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"columns is-gapless is-multiline"},[r("div",{staticClass:"column is-full"},[r("span",[t._v(t._s(t.cartItem.title))]),r("span",{staticClass:"is-pulled-right"},[r("i",{staticClass:"fa fa-arrow-circle-up operate",on:{click:function(e){return t.addToCart(t.cartItem)}}}),r("i",{staticClass:"fa fa-arrow-circle-down operate",on:{click:function(e){return t.removeCartItem(t.cartItem.id)}}})])]),r("div",{staticClass:"column is-full"},[r("span",{staticClass:"has-text-primary has-text-weight-bold"},[t._v("单价："+t._s(t.cartItem.price))]),r("span",{staticClass:"has-text-grey is-pulled-right"},[t._v("数量："+t._s(t.cartItem.quantity))])])])},u=[],l={name:"CartListItem",props:["cartItem"],methods:{addToCart:function(t){this.$store.dispatch("addToCart",t)},removeCartItem:function(t){this.$store.dispatch("removeCartItem",t)}}},d=l,f=(r("564f"),r("2877")),m=Object(f["a"])(d,o,u,!1,null,"5eaf58eb",null),p=m.exports,h={name:"CartList",created:function(){this.$store.dispatch("getCartItems")},methods:{removeAllCartItems:function(){this.$store.dispatch("removeAllCartItems")}},computed:{cartItems:function(){return this.$store.getters.cartItems},cartTotal:function(){return this.$store.getters.cartTotal},cartQuantity:function(){return this.$store.getters.cartQuantity}},components:{CartListItem:p}},v=h,C=(r("0997"),Object(f["a"])(v,i,c,!1,null,"bf6a7880",null)),_=C.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box"},[t._m(0),r("div",{staticClass:"product-list"},t._l(t.productItems,function(t){return r("ProductListItem",{key:t.id,attrs:{productItem:t}})}),1),r("div",{staticClass:"product-count has-text-right has-text-weight-bold"},[t._v("\n    总商品数量："+t._s(t.productItems.length)+"\n  ")])])},g=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-header has-text-centered"},[r("i",{staticClass:"fa fa-user-circle fa-2x"})])}],b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"product-list-item"},[r("h2",{staticClass:"is-size-5 has-text-centered"},[t._v("\n    "+t._s(t.productItem.title)+"\n    "),r("span",{staticClass:"button is-small is-primary is-pulled-right",on:{click:function(e){return t.addToCart(t.productItem)}}},[t._v("加入购物车")])]),r("p",[t._v(t._s(t.productItem.description))]),r("p",{staticClass:"has-text-primary has-text-weight-bold"},[t._v("$"+t._s(t.productItem.price))])])},T=[],y={name:"ProductListItem",props:["productItem"],methods:{addToCart:function(t){this.$store.dispatch("addToCart",t)}}},x=y,P=(r("3379"),Object(f["a"])(x,b,T,!1,null,"3241ea48",null)),E=P.exports,$={name:"ProductList",created:function(){this.$store.dispatch("getProductItems")},computed:{productItems:function(){return this.$store.getters.productItems}},components:{ProductListItem:E}},w=$,A=(r("e033"),Object(f["a"])(w,I,g,!1,null,"143f1a5b",null)),O=A.exports,j={name:"app",components:{CartList:_,ProductList:O}},S=j,L=Object(f["a"])(S,s,n,!1,null,null,null),M=L.exports,k=r("2f62"),D=r("bc3a"),U=r.n(D),R={cartItems:[]},q={UPDATE_CART_ITEMS:function(t,e){t.cartItems=e}},Q={addToCart:function(t,e){U.a.post("/api/cart",e).then(function(e){t.commit("UPDATE_CART_ITEMS",e.data)})},getCartItems:function(t){U.a.get("/api/cart").then(function(e){t.commit("UPDATE_CART_ITEMS",e.data)})},removeCartItem:function(t,e){U.a.delete("/api/cart/delete",{params:{id:e}}).then(function(e){t.commit("UPDATE_CART_ITEMS",e.data)})},removeAllCartItems:function(t){U.a.delete("/api/cart/delete/all").then(function(e){t.commit("UPDATE_CART_ITEMS",e.data)})}},J={cartItems:function(t){return t.cartItems},cartTotal:function(t){return t.cartItems.reduce(function(t,e){return console.log(e.quantity*e.price,t),e.quantity*e.price+t},0).toFixed(2)},cartQuantity:function(t){return t.cartItems.reduce(function(t,e){return e.quantity+t},0)}},z={state:R,mutations:q,actions:Q,getters:J},F=z,B={productItems:[]},G={UPDATE_PRODUCT_ITEMS:function(t,e){t.productItems=e}},H={getProductItems:function(t){U.a.get("/api/product").then(function(e){t.commit("UPDATE_PRODUCT_ITEMS",e.data),console.log(e)})}},K={productItems:function(t){return t.productItems}},N={state:B,mutations:G,actions:H,getters:K},V=N;a["a"].use(k["a"]);var W=new k["a"].Store({modules:{cart:F,product:V}});a["a"].config.productionTip=!1,new a["a"]({store:W,render:function(t){return t(M)}}).$mount("#app")},"68eb":function(t,e,r){},"8ed8":function(t,e,r){},af8e:function(t,e,r){},e033:function(t,e,r){"use strict";var a=r("8ed8"),s=r.n(a);s.a}});
//# sourceMappingURL=app.f7b1261f.js.map